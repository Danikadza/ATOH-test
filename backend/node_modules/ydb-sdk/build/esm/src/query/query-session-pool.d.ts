/// <reference types="node" />
import { Ydb } from "ydb-sdk-proto";
export import QueryService = Ydb.Query.V1.QueryService;
import { Endpoint } from "../discovery";
import { Logger } from "../logging";
import { ISslCredentials } from "../utils/ssl-credentials";
import EventEmitter from "events";
import { QuerySession } from "./query-session";
import { IQueryClientSettings } from "./query-client";
import { AuthenticatedService, ClientOptions } from "../utils";
import { IAuthService } from "../credentials/i-auth-service";
export declare class SessionBuilder extends AuthenticatedService<QueryService> {
    endpoint: Endpoint;
    private readonly logger;
    constructor(endpoint: Endpoint, database: string, authService: IAuthService, logger: Logger, sslCredentials?: ISslCredentials, clientOptions?: ClientOptions);
    create(): Promise<QuerySession>;
}
export declare enum SessionEvent {
    SESSION_RELEASE = "SESSION_RELEASE",
    SESSION_BROKEN = "SESSION_BROKEN"
}
export type SessionCallback<T> = (session: QuerySession) => Promise<T>;
export declare class QuerySessionPool extends EventEmitter {
    private readonly database;
    private readonly authService;
    private readonly sslCredentials?;
    private readonly clientOptions?;
    minLimit: number;
    private readonly maxLimit;
    private readonly sessions;
    private readonly sessionBuilders;
    private readonly discoveryService;
    private newSessionsRequested;
    private sessionsBeingDeleted;
    private readonly logger;
    private readonly waiters;
    private static SESSION_MIN_LIMIT;
    private static SESSION_MAX_LIMIT;
    constructor(settings: IQueryClientSettings);
    destroy(): Promise<void>;
    private getSessionBuilder;
    private maybeUseSession;
    private createSession;
    private deleteSession;
    acquire(timeout?: number): Promise<QuerySession>;
}
